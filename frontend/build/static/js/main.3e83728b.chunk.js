(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,n){e.exports=n(98)},79:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(46),l=n.n(o),i=n(105),c=n(2),u=n(45),s=n(53),d=n(104),m=n(54),p=n(4),h=Object(s.a)({uri:"http://localhost:8000/app/graphql",credentials:"include"}),f=new d.a,E=new u.a({cache:f,link:p.a.from([Object(m.a)({defaults:{containers:{__typename:"Containers",dashboard:{__typename:"Container",default:null}}},resolvers:{Mutation:{}},cache:f}),h])}),b=n(6),v=n(7),w=n(9),g=n(8),O=n(10),C=n(107),j=n(55),k=n(41),y=n(106),D=n(42),S=n.n(D);function R(){var e=Object(k.a)(["\n  {\n    me {\n      username\n    }\n  }\n"]);return R=function(){return e},e}var N=S()(R()),$=function(e){var t=e.component,n=Object(j.a)(e,["component"]);return r.a.createElement(c.Query,{query:N},function(e){var a=e.loading,o=e.error,l=e.data;return a?r.a.createElement("div",null):r.a.createElement(C.a,Object.assign({},n,{render:function(e){return o||l.me.userneme?r.a.createElement(y.a,{to:"/accounts/login"}):r.a.createElement(t,e)}}))})},q=(n(79),function(e){function t(){return Object(b.a)(this,t),Object(w.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(a.Component)),T=n(18),M=n(14),A=function(e){return r.a.createElement("div",{className:"card"},e.children)},x=function(e){return r.a.createElement("div",{className:"card-header"},e.children)},I=function(e){return r.a.createElement("div",{className:"card-section"},e.children)},L=function(e){return r.a.createElement("div",{className:"card-body"},e.children)},V=function(e){return r.a.createElement("div",{className:"card-buttons"},e.children)},Q=function(e){return r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"col-6 veritical-align-center"},r.a.createElement("h4",{className:"title-bar-title"},e.title)),r.a.createElement("div",{className:"col-6 align-right"},e.children))},P=function(e){return r.a.createElement("button",{disabled:e.disabled,className:"button",onClick:e.onClick},e.children)},F=function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e.name},e.description),r.a.createElement("input",{name:e.name,type:e.type?e.type:"text",value:e.value,onChange:e.onChange,placeholder:e.helpText}),r.a.createElement("small",null,e.error&&e.error.messages.join(", ")))},W=function(e){return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login"},r.a.createElement(A,null,r.a.createElement(x,null,r.a.createElement(Q,{title:"Login"})),r.a.createElement(L,null,r.a.createElement(F,{name:"username",description:"Username",helpText:"Username",value:e.username,onChange:e.onChange}),r.a.createElement(F,{type:"password",name:"password",description:"Password",helpText:"Password",value:e.password,onChange:e.onChange})),r.a.createElement(V,null,r.a.createElement(P,{onClick:e.onLogin},"Login")))))},_=(n(81),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(g.a)(t).call(this,e))).onChange=function(e){return n.setState(Object(M.a)({},n.state.detail,Object(T.a)({},e.target.name,e.target.value)))},n.onLogin=function(){fetch("http://localhost:8000/accounts/login",{method:"POST",mode:"no-cors",credentials:"include",body:{username:n.state.username,password:n.state.password}})},n.state={username:"",password:""},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(W,{username:this.state.username,password:this.props.password,onChange:this.onChange,onLogin:this.onLogin})}}]),t}(a.Component)),B=n(103),J=function(e){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("span",{className:"logo"},r.a.createElement("i",{className:"fas fa-chart-pie icon"}),"Zara"),r.a.createElement("div",{className:"menu-buttons"},r.a.createElement(B.a,{className:"button button-light",to:"/counter"},r.a.createElement("i",{className:"fas fa-plus fa-spacing"}),"New counter")),r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement(B.a,{to:"/dashboard"},r.a.createElement("i",{className:"fas fa-chart-area fa-spacing"}),"Dashboard")),r.a.createElement("li",null,r.a.createElement(B.a,{to:"/counters"},r.a.createElement("i",{className:"fas fa-cube fa-spacing"}),"Counters")),r.a.createElement("li",null,r.a.createElement(B.a,{to:"/totals"},r.a.createElement("i",{className:"fas fa-cubes fa-spacing"}),"Totals")))),r.a.createElement("div",{className:"content"},r.a.createElement("span",{className:"title"},e.title),r.a.createElement("div",{className:"main"},e.children)))},U=(n(83),function(e){function t(){return Object(b.a)(this,t),Object(w.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(J,{title:"Dashboard"})}}]),t}(a.Component));function Y(){var e=Object(k.a)(["\n  mutation mutationDeleteTotalRow($pk: Int!) {\n    mutationDeleteTotalRow(pk: $pk) {\n      success\n    }\n  }\n"]);return Y=function(){return e},e}function Z(){var e=Object(k.a)(["\n  mutation mutationTotalRow($id: ID!, $total: ID!, $counter: ID!) {\n    mutationTotalRow(input: { id: $id, total: $total, counter: $counter }) {\n      totalRow {\n        id\n      }\n      errors {\n        messages\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function z(){var e=Object(k.a)(["\n  mutation mutationTotalRow($total: ID!, $counter: ID!) {\n    mutationTotalRow(input: { total: $total, counter: $counter }) {\n      totalRow {\n        id\n      }\n      errors {\n        messages\n      }\n    }\n  }\n"]);return z=function(){return e},e}function G(){var e=Object(k.a)(["\n  mutation updateTotal($id: ID!, $title: String!) {\n    mutationTotal(input: { id: $id, title: $title }) {\n      total {\n        id\n      }\n      errors {\n        field\n        messages\n      }\n    }\n  }\n"]);return G=function(){return e},e}function H(){var e=Object(k.a)(["\n  mutation createTotal($title: String!) {\n    mutationTotal(input: { title: $title }) {\n      total {\n        id\n      }\n      errors {\n        field\n        messages\n      }\n    }\n  }\n"]);return H=function(){return e},e}function K(){var e=Object(k.a)(["\n  query($id: Int) {\n    detailTotal(id: $id) {\n      id\n      title\n      totalrowSet {\n        id\n        counter {\n          id\n          title\n          counterrowSet {\n            amount\n          }\n        }\n      }\n    }\n  }\n"]);return K=function(){return e},e}function X(){var e=Object(k.a)(["\n  mutation mutationDeleteTotal($pk: Int!) {\n    mutationDeleteTotal(pk: $pk) {\n      success\n    }\n  }\n"]);return X=function(){return e},e}function ee(){var e=Object(k.a)(["\n  {\n    listTotal {\n      id\n      title\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(k.a)(["\n  mutation mutationDeleteCounterRow($pk: Int!) {\n    mutationDeleteCounterRow(pk: $pk) {\n      success\n    }\n  }\n"]);return te=function(){return e},e}function ne(){var e=Object(k.a)(["\n  mutation mutationCounterRow(\n    $id: ID!\n    $counter: ID!\n    $date: Date!\n    $description: String!\n    $period: String!\n    $amount: Float!\n  ) {\n    mutationCounterRow(\n      input: { id: $id, counter: $counter, date: $date, description: $description, period: $period, amount: $amount }\n    ) {\n      counterRow {\n        id\n      }\n      errors {\n        messages\n      }\n    }\n  }\n"]);return ne=function(){return e},e}function ae(){var e=Object(k.a)(["\n  mutation mutationCounterRow($counter: ID!, $date: Date!, $description: String!, $period: String!, $amount: Float!) {\n    mutationCounterRow(\n      input: { counter: $counter, date: $date, description: $description, period: $period, amount: $amount }\n    ) {\n      counterRow {\n        id\n      }\n      errors {\n        messages\n      }\n    }\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(k.a)(["\n  mutation updateCounter($id: ID!, $title: String!) {\n    mutationCounter(input: { id: $id, title: $title }) {\n      counter {\n        id\n      }\n      errors {\n        field\n        messages\n      }\n    }\n  }\n"]);return re=function(){return e},e}function oe(){var e=Object(k.a)(["\n  mutation createCounter($title: String!) {\n    mutationCounter(input: { title: $title }) {\n      counter {\n        id\n      }\n      errors {\n        field\n        messages\n      }\n    }\n  }\n"]);return oe=function(){return e},e}function le(){var e=Object(k.a)(["\n  query($id: Int) {\n    detailCounter(id: $id) {\n      id\n      title\n      counterrowSet {\n        id\n        date\n        description\n        period\n        amount\n      }\n    }\n  }\n"]);return le=function(){return e},e}function ie(){var e=Object(k.a)(["\n  mutation mutationDeleteCounter($pk: Int!) {\n    mutationDeleteCounter(pk: $pk) {\n      success\n    }\n  }\n"]);return ie=function(){return e},e}function ce(){var e=Object(k.a)(["\n  {\n    listCounter {\n      id\n      title\n    }\n  }\n"]);return ce=function(){return e},e}var ue=S()(ce()),se=S()(ie()),de=S()(le()),me=S()(oe()),pe=S()(re()),he=S()(ae()),fe=S()(ne()),Ee=S()(te()),be=S()(ee()),ve=S()(X()),we=S()(K()),ge=S()(H()),Oe=S()(G()),Ce=S()(z()),je=S()(Z()),ke=S()(Y()),ye=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(g.a)(t).call(this,e))).state={confirm:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"delete"},this.state.confirm?null:r.a.createElement("div",null,r.a.createElement("button",{className:"button-icon red",onClick:function(){return e.setState({confirm:!0})}},r.a.createElement("i",{className:"fa fa-trash"}))),this.state.confirm?r.a.createElement("div",null,r.a.createElement("button",{className:"button-icon green",onClick:function(){return e.props.onClick()}},r.a.createElement("i",{className:"fa fa-check"})),r.a.createElement("button",{className:"button-icon red",onClick:function(){return e.setState({confirm:!1})}},r.a.createElement("i",{className:"fa fa-times"}))):null)}}]),t}(a.Component),De=function(e){return r.a.createElement(B.a,{className:"button button-plus",to:e.link},r.a.createElement("i",{className:"fas fa-plus"}))},Se=function(e){return r.a.createElement("div",null,r.a.createElement(A,null,r.a.createElement(x,null,r.a.createElement(Q,{title:"Your counters"})),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",null,"Title"),r.a.createElement("th",{width:"15%"}))),r.a.createElement("tbody",null,e.list.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement(B.a,{to:"/counter/"+t.id},t.title)),r.a.createElement("td",null,r.a.createElement(ye,{onClick:function(){return e.onDelete(t.id)}})))})))),r.a.createElement(De,{link:"/counter"}))},Re=(n(85),function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).onDelete=function(e){n.props.delete({variables:{pk:e}})},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e;return e=this.props.query.loading?"Loading...":r.a.createElement(Se,{list:this.props.query.listCounter,onDelete:this.onDelete}),r.a.createElement(J,{title:"Counters"},e)}}]),t}(a.Component)),Ne=Object(c.compose)(Object(c.graphql)(ue,{name:"query",options:{notifyOnNetworkStatusChange:!0}}),Object(c.graphql)(se,{name:"delete",options:{refetchQueries:[{query:ue}]}}))(Re),$e=function(e){return e?e.toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},qe=function(e){return r.a.createElement("span",{className:"total"},0===e.list.length?$e(0):1===e.list.length?$e(e.list[0][e.column]):$e(e.list.reduce(function(t,n){return t[e.column]?t[e.column]+n[e.column]:t+n[e.column]}))," ","\u20ac")},Te=function(e){return r.a.createElement("div",{className:e.isVisible?"modal":"modal hidden"},r.a.createElement("div",null,r.a.createElement(Q,{title:e.title},r.a.createElement("span",{className:"pointer",onClick:e.onCloseModal},r.a.createElement("i",{className:"fas fa-times"}))),r.a.createElement("div",null,e.children),r.a.createElement(P,{onClick:e.onValidate},"Save")))},Me=function(e){return r.a.createElement("div",null,r.a.createElement(A,null,r.a.createElement(x,null,r.a.createElement(Q,{title:"Counter detail"},r.a.createElement(P,{onClick:e.onSave},"Save"))),r.a.createElement(L,null,r.a.createElement("div",null,r.a.createElement(F,{name:"title",description:"Title",value:e.detail.title,helpText:"Title of conter",onChange:e.onChange,error:e.errors.find(function(e){return"title"===e.field})}))),r.a.createElement(I,null,r.a.createElement(Q,{title:"Rows"},r.a.createElement(P,{disabled:e.buttonAddDisabled,onClick:e.clickAdd},"Add"))),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Period"),r.a.createElement("th",{className:"align-right"},"Amount"),r.a.createElement("th",{width:"15%"}))),r.a.createElement("tbody",null,e.list&&e.list.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.clickEdit(t.id)}},t.description)),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.period),r.a.createElement("td",{className:"align-right"},$e(t.amount)," \u20ac"),r.a.createElement("td",null,r.a.createElement(ye,{onClick:function(){return e.clickDelete(t.id)}})))})),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5,className:"align-right"},r.a.createElement(qe,{list:e.list||[],column:"amount"})),r.a.createElement("td",{colSpan:1}))))),r.a.createElement(Te,{title:"Add a counter row",isVisible:e.modalVisible,onCloseModal:e.closeModal,onValidate:e.onSaveRow},r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"col-2"},r.a.createElement(F,{type:"date",name:"date",description:"Date",value:e.rowDetail.date,helpText:"Date of counter row",onChange:e.onChangeRow,error:e.rowErrors.find(function(e){return"date"===e.field})})),r.a.createElement("div",{className:"col-6"},r.a.createElement(F,{name:"description",description:"Description",value:e.rowDetail.description,helpText:"Description of counter row",onChange:e.onChangeRow,error:e.rowErrors.find(function(e){return"description"===e.field})})),r.a.createElement("div",{className:"col-2"},r.a.createElement(F,{name:"period",description:"Period",value:e.rowDetail.period,helpText:"Period of counter row",onChange:e.onChangeRow,error:e.rowErrors.find(function(e){return"period"===e.field})})),r.a.createElement("div",{className:"col-2"},r.a.createElement(F,{name:"amount",description:"Amount",value:e.rowDetail.amount,helpText:"Amount of counter row",onChange:e.onChangeRow,error:e.rowErrors.find(function(e){return"amount"===e.field})})))))},Ae=(n(87),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(g.a)(t).call(this,e))).onSave=function(){return n.save().then(function(e){return n.errorOrRedirect(e)})},n.onSaveRow=function(){return n.saveRow().then(function(e){return n.errorOrCloseModal(e)})},n.save=function(){return n.state.id?n.props.update({variables:{id:n.state.id,title:n.state.detail.title}}):n.props.create({variables:Object(M.a)({},n.state.detail)})},n.saveRow=function(){return n.state.rowDetail.id?n.props.updateRow({variables:Object(M.a)({},n.state.rowDetail,{counter:n.state.id})}):n.props.createRow({variables:Object(M.a)({},n.state.rowDetail,{counter:n.state.id})})},n.error=function(e){return n.setState({errors:e.data.mutationCounter.errors})},n.errorRow=function(e){return n.setState({rowErrors:e.data.mutationCounterRow.errors})},n.resetRow=function(){return n.setState({rowDetail:{description:"",date:"",period:"",amount:""},rowErrors:[]})},n.errorOrRedirect=function(e){return e.data.mutationCounter.errors.length>0?n.error(e):n.props.history.push("/counter/"+e.data.mutationCounter.counter.id)},n.errorOrOpenModalOnAdd=function(e){return e.data.mutationCounter.errors.length>0?n.error(e):(n.resetRow(),n.openModal())},n.errorOrOpenModalOnEdit=function(e,t){if(e.data.mutationCounter.errors.length>0)return n.error(e);var a=n.state.detail.counterrowSet.find(function(e){return e.id===t});return n.setState({rowDetail:a}),n.openModal()},n.errorOrCloseModal=function(e){return e.data.mutationCounterRow.errors.length>0&&n.errorRow(e),n.resetRow(),n.closeModal()},n.openModal=function(){return n.setState({modalVisible:!0})},n.closeModal=function(){return n.setState({modalVisible:!1})},n.clickAdd=function(){return n.save().then(function(e){return n.errorOrOpenModalOnAdd(e)})},n.onChange=function(e){return n.setState({detail:Object(M.a)({},n.state.detail,Object(T.a)({},e.target.name,e.target.value))})},n.onChangeRow=function(e){return n.setState({rowDetail:Object(M.a)({},n.state.rowDetail,Object(T.a)({},e.target.name,e.target.value))})},n.clickEdit=function(e){return n.save().then(function(t){return n.errorOrOpenModalOnEdit(t,e)})},n.clickDelete=function(e){return n.props.delete({variables:{pk:e}})},n.buttonAddDisabled=function(){return 0===n.state.id},n.state={id:0,detail:{title:""},errors:[],rowDetail:{description:"",date:"",period:"",amount:""},rowErrors:[],modalVisible:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.query.detailCounter&&(this.setState({id:e.match.params.id}),this.setState({detail:e.query.detailCounter}))}},{key:"render",value:function(){var e;return e=this.props.query.loading?"Loading...":r.a.createElement(Me,{detail:this.state.detail,onChange:this.onChange,onSave:this.onSave,errors:this.state.errors,list:this.state.detail.counterrowSet,clickAdd:this.clickAdd,closeModal:this.closeModal,modalVisible:this.state.modalVisible,rowDetail:this.state.rowDetail,rowErrors:this.state.rowErrors,onChangeRow:this.onChangeRow,onSaveRow:this.onSaveRow,clickEdit:this.clickEdit,clickDelete:this.clickDelete,buttonAddDisabled:this.buttonAddDisabled()}),r.a.createElement(J,{title:"Counter"},e)}}]),t}(a.Component)),xe=Object(c.compose)(Object(c.graphql)(de,{name:"query",options:function(e){return{notifyOnNetworkStatusChange:!0,variables:{id:e.match.params.id},fetchPolicy:"network-only"}}}),Object(c.graphql)(me,{name:"create",options:{refetchQueries:[{query:ue}]}}),Object(c.graphql)(pe,{name:"update",options:{refetchQueries:[{query:ue}]}}),Object(c.graphql)(he,{name:"createRow",options:function(e){return{notifyOnNetworkStatusChange:!0,refetchQueries:[{query:de,variables:{id:e.match.params.id}}]}}}),Object(c.graphql)(fe,{name:"updateRow",options:function(e){return{notifyOnNetworkStatusChange:!0,refetchQueries:[{query:de,variables:{id:e.match.params.id}}]}}}),Object(c.graphql)(Ee,{name:"delete",options:function(e){return{notifyOnNetworkStatusChange:!0,refetchQueries:[{query:de,variables:{id:e.match.params.id}}]}}}))(Ae),Ie=function(e){return r.a.createElement("div",null,r.a.createElement(A,null,r.a.createElement(x,null,r.a.createElement(Q,{title:"Your totals"})),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",null,"Title"),r.a.createElement("th",{width:"15%"}))),r.a.createElement("tbody",null,e.list.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement(B.a,{to:"/total/"+t.id},t.title)),r.a.createElement("td",null,r.a.createElement(ye,{onClick:function(){return e.onDelete(t.id)}})))})))),r.a.createElement(De,{link:"/total"}))},Le=(n(89),function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(w.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).onDelete=function(e){n.props.delete({variables:{pk:e}})},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e;return e=this.props.query.loading?"Loading...":r.a.createElement(Ie,{list:this.props.query.listTotal,onDelete:this.onDelete}),r.a.createElement(J,{title:"Totals"},e)}}]),t}(a.Component)),Ve=Object(c.compose)(Object(c.graphql)(be,{name:"query",options:{notifyOnNetworkStatusChange:!0}}),Object(c.graphql)(ve,{name:"delete",options:{refetchQueries:[{query:be}]}}))(Le),Qe=function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e.name},e.description),r.a.createElement("select",{name:e.name,value:e.value,onChange:e.onChange},e.options.map(function(e){return r.a.createElement("option",{value:e.value},e.label)})),r.a.createElement("small",null,e.error&&e.error.messages.join(", ")))},Pe=function(e){return r.a.createElement("div",null,r.a.createElement(A,null,r.a.createElement(x,null,r.a.createElement(Q,{title:"Total detail"},r.a.createElement(P,{onClick:e.onSave},"Save"))),r.a.createElement(L,null,r.a.createElement("div",null,r.a.createElement(F,{name:"title",description:"Title",value:e.detail.title,helpText:"Title of total",onChange:e.onChange,error:e.errors.find(function(e){return"title"===e.field})}))),r.a.createElement(I,null,r.a.createElement(Q,{title:"Rows"},r.a.createElement(P,{disabled:e.buttonAddDisabled,onClick:e.clickAdd},"Add"))),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",null,"Counter"),r.a.createElement("th",{className:"align-right"},"Amount"),r.a.createElement("th",{width:"15%"}))),r.a.createElement("tbody",null,e.list&&e.list.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.clickEdit(t.id)}},t.counter.title)),r.a.createElement("td",{className:"align-right"},$e(t.amount)," \u20ac"),r.a.createElement("td",null,r.a.createElement(ye,{onClick:function(){return e.clickDelete(t.id)}})))})),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"align-right"},r.a.createElement(qe,{list:e.list||[],column:"amount"})),r.a.createElement("td",{colSpan:1}))))),r.a.createElement(Te,{title:"Add a total row",isVisible:e.modalVisible,onCloseModal:e.closeModal,onValidate:e.onSaveRow},r.a.createElement("div",{className:"grid"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Qe,{name:"counter",description:"Counter",value:e.rowDetail.counter,options:e.counterList,helpText:"Counter",onChange:e.onChangeRow,error:e.rowErrors.find(function(e){return"date"===e.field})})))))},Fe=(n(91),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(w.a)(this,Object(g.a)(t).call(this,e))).onSave=function(){return n.save().then(function(e){return n.errorOrRedirect(e)})},n.onSaveRow=function(){return n.saveRow().then(function(e){return n.errorOrCloseModal(e)})},n.save=function(){return n.state.id?n.props.update({variables:{id:n.state.id,title:n.state.detail.title}}):n.props.create({variables:Object(M.a)({},n.state.detail)})},n.saveRow=function(){return n.state.rowDetail.id?n.props.updateRow({variables:Object(M.a)({},n.state.rowDetail,{total:n.state.id})}):n.props.createRow({variables:Object(M.a)({},n.state.rowDetail,{total:n.state.id})})},n.error=function(e){return n.setState({errors:e.data.mutationTotal.errors})},n.errorRow=function(e){return n.setState({rowErrors:e.data.mutationTotalRow.errors})},n.resetRow=function(){return n.setState({rowDetail:{counter:0},rowErrors:[]})},n.errorOrRedirect=function(e){return e.data.mutationTotal.errors.length>0?n.error(e):n.props.history.push("/total/"+e.data.mutationTotal.total.id)},n.errorOrOpenModalOnAdd=function(e){return e.data.mutationTotal.errors.length>0?n.error(e):(n.resetRow(),n.openModal())},n.errorOrOpenModalOnEdit=function(e,t){if(e.data.mutationTotal.errors.length>0)return n.error(e);var a=n.state.detail.totalrowSet.find(function(e){return e.id===t});return n.setState({rowDetail:a}),n.openModal()},n.errorOrCloseModal=function(e){return e.data.mutationTotalRow.errors.length>0&&n.errorRow(e),n.resetRow(),n.closeModal()},n.openModal=function(){return n.setState({modalVisible:!0})},n.closeModal=function(){return n.setState({modalVisible:!1})},n.clickAdd=function(){return n.save().then(function(e){return n.errorOrOpenModalOnAdd(e)})},n.onChange=function(e){return n.setState({detail:Object(M.a)({},n.state.detail,Object(T.a)({},e.target.name,e.target.value))})},n.onChangeRow=function(e){return n.setState({rowDetail:Object(M.a)({},n.state.rowDetail,Object(T.a)({},e.target.name,e.target.value))})},n.clickEdit=function(e){return n.save().then(function(t){return n.errorOrOpenModalOnEdit(t,e)})},n.clickDelete=function(e){return n.props.delete({variables:{pk:e}})},n.buttonAddDisabled=function(){return 0===n.state.id},n.adaptCounterList=function(){var e=[];return n.props.queryListCounter.listCounter.map(function(t){return e.push({value:t.id,label:t.title})}),e},n.adaptTotalRowList=function(){var e=[];return n.state.detail.totalrowSet.map(function(t){var n=t.counter.counterrowSet.reduce(function(e,t){return e+t.amount},0);return e.push(Object(M.a)({},t,{amount:n})),null}),e},n.state={id:0,detail:{title:""},errors:[],rowDetail:{description:"",date:"",period:"",amount:""},rowErrors:[],modalVisible:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.query.detailTotal&&(this.setState({id:e.match.params.id}),this.setState({detail:e.query.detailTotal}))}},{key:"render",value:function(){var e;return e=this.props.query.loading||this.props.queryListCounter.loading?"Loading...":r.a.createElement(Pe,{detail:this.state.detail,onChange:this.onChange,onSave:this.onSave,errors:this.state.errors,list:this.adaptTotalRowList(),clickAdd:this.clickAdd,closeModal:this.closeModal,modalVisible:this.state.modalVisible,rowDetail:this.state.rowDetail,rowErrors:this.state.rowErrors,onChangeRow:this.onChangeRow,onSaveRow:this.onSaveRow,clickEdit:this.clickEdit,clickDelete:this.clickDelete,buttonAddDisabled:this.buttonAddDisabled(),counterList:this.adaptCounterList()}),r.a.createElement(J,{title:"Total"},e)}}]),t}(a.Component)),We=Object(c.compose)(Object(c.graphql)(we,{name:"query",options:function(e){return{notifyOnNetworkStatusChange:!0,variables:{id:e.match.params.id},fetchPolicy:"network-only"}}}),Object(c.graphql)(ge,{name:"create",options:{refetchQueries:[{query:be}]}}),Object(c.graphql)(Oe,{name:"update",options:{refetchQueries:[{query:be}]}}),Object(c.graphql)(Ce,{name:"createRow",options:function(e){return{notifyOnNetworkStatusChange:!0,refetchQueries:[{query:we,variables:{id:e.match.params.id}}]}}}),Object(c.graphql)(je,{name:"updateRow",options:function(e){return{notifyOnNetworkStatusChange:!0,refetchQueries:[{query:we,variables:{id:e.match.params.id}}]}}}),Object(c.graphql)(ke,{name:"delete",options:function(e){return{notifyOnNetworkStatusChange:!0,refetchQueries:[{query:we,variables:{id:e.match.params.id}}]}}}),Object(c.graphql)(ue,{name:"queryListCounter"}))(Fe),_e=(n(93),function(e){function t(){return Object(b.a)(this,t),Object(w.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{exact:!0,path:"/login",component:_}),r.a.createElement(C.a,{exact:!0,path:"/demo",component:q}),r.a.createElement($,{exact:!0,path:"/",component:U}),r.a.createElement($,{exact:!0,path:"/dashboard",component:U}),r.a.createElement($,{exact:!0,path:"/counters",component:Ne}),r.a.createElement($,{exact:!0,path:"/counter",component:xe}),r.a.createElement($,{exact:!0,path:"/counter/:id",component:xe}),r.a.createElement($,{exact:!0,path:"/totals",component:Ve}),r.a.createElement($,{exact:!0,path:"/total",component:We}),r.a.createElement($,{exact:!0,path:"/total/:id",component:We}))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(95);l.a.render(r.a.createElement(c.ApolloProvider,{client:E},r.a.createElement(i.a,null,r.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,2,1]]]);
//# sourceMappingURL=main.3e83728b.chunk.js.map